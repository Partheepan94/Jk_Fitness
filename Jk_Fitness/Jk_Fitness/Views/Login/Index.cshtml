
@{
    ViewData["Title"] = "Login";
    Layout = "~/Views/Shared/_Layout_Login.cshtml";
}

<div class="card card-outline card-primary">
    <div class="card-header text-center">
        <a href="#" class="h1"><b>Jk </b>Fitness</a>
    </div>
    <div class="card-body">
        <p class="login-box-msg">Sign in to start your session</p>
        <form id="formId" method="post">
            <div class="input-group mb-3">
                @*<input type="hidden" id="msg" data-value="@ViewBag.Msg">*@
                <input type="text" class="form-control" id="UsrName" placeholder="UserName">
                <div class="input-group-append">
                    <div class="input-group-text">
                        <span class="fas fa-envelope"></span>
                    </div>
                </div>
            </div>
            <div class="input-group mb-3">
                <input type="password" class="form-control" id="Pasword" placeholder="Password">
                <div class="input-group-append">
                    <div class="input-group-text">
                        <span class="fas fa-lock"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-8">
                    <div class="icheck-primary">
                        <input type="checkbox" id="remember">
                        <label for="remember">
                            Remember Me
                        </label>
                    </div>
                </div>
                <div class="col-4">
                    <button type="button" id="SignIn" class="btn btn-primary btn-block">Sign In</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script type="text/javascript">

    $('#SignIn').click(function () {

        var username = $('#UsrName').val();
        var password = $('#Pasword').val();

        if (username.trim() == "") {
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'Please fill out UserName Field!',
            });
        }
        else if (password.trim() == "") {
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'Please fill out PassWord Field!',
            });
        }
        else {
            $.ajax({
                type: 'POST',
                url:'@Url.Action("ValidateLogin", "Login")',
                dataType: 'json',
                data: '{"Email":" ' + username + ' ","Password":" ' + password + ' "}',
                contentType: 'application/json; charset=utf-8',
                success: function (response) {

                    var myData = jQuery.parseJSON(JSON.stringify(response));
                    if (myData.code == "1") {
                        window.location.replace('@Url.Action("Index", "Home")');
                    } else if (myData.code == "0" && myData.message =="Invalid") {
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'Invalid Login Credentials!',
                        });
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'Something went wrong!',
                        });
                    }
                },
                error: function (jqXHR, exception) {
                }
            });
        }
        
    });

</script>